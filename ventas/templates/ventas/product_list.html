{% extends "ventas/base.html" %}
{% load currency %}
{% block title %}Productos{% endblock %}
{% block content %}
<h1 class="mb-3">Productos</h1>
<form class="row g-2 mb-3" method="get">
  <div class="col-auto"><input class="form-control" type="search" name="q" value="{{ q }}" placeholder="Buscar por nombre o código…"></div>
  <div class="col-auto"><button class="btn btn-outline-secondary" type="submit">Buscar</button></div>
  <div class="col-auto ms-auto"><a class="btn btn-primary" href="{% url 'ventas:product_create' %}">Nuevo producto</a></div>
</form>
<table class="table table-striped align-middle">
  <thead><tr><th>ID</th><th>Código</th><th>Nombre</th><th class="text-end">Precio</th><th class="text-end">Stock</th><th class="text-end">Acciones</th></tr></thead>
  <tbody>
  {% for obj in page_obj.object_list %}
    <tr>
      <td>{{ obj.id }}</td>
      <td>{{ obj.codigo }}</td>
      <td><a href="{% url 'ventas:product_detail' obj.id %}">{{ obj.nombre }}</a></td>
      <td class="text-end">${{ obj.precio|clp }}</td>
      <td class="text-end">{{ obj.stock }}</td>
      <td class="text-end">
        <a class="btn btn-sm btn-outline-primary" href="{% url 'ventas:product_update' obj.id %}">Editar</a>
        <a class="btn btn-sm btn-outline-danger" href="{% url 'ventas:product_delete' obj.id %}">Eliminar</a>
      </td>
    </tr>
  {% empty %}
    <tr><td colspan="6">No hay productos.</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
