{% extends "ventas/base.html" %}
{% load currency %}
{% block title %}Ventas{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="mb-0">Ventas</h1>
  <a class="btn btn-primary" href="{% url 'ventas:venta_create' %}">Nueva venta</a>
</div>
<table class="table table-striped align-middle">
  <thead><tr><th>ID</th><th>Fecha</th><th>Cliente / RUT</th><th class="text-end">Total</th><th></th></tr></thead>
  <tbody>
  {% for v in page_obj.object_list %}
    <tr>
      <td>{{ v.id }}</td>
      <td>{{ v.fecha }}</td>
      <td>{% if v.cliente_id %}{{ v.cliente.nombre }} ({{ v.cliente.rut }}){% else %}{{ v.rut_boleta }}{% endif %}</td>
      <td class="text-end">${{ v.total|clp }}</td>
      <td class="text-end"><a class="btn btn-sm btn-outline-primary" href="{% url 'ventas:venta_detail' v.id %}">Ver</a></td>
    </tr>
  {% empty %}
    <tr><td colspan="5">Sin ventas.</td></tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
